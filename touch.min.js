/**
 * 
 * @authors Jack.Chan (fulicat@qq.com)
 * @date    2014-07-17 11:03:51
 * @update  2014-07-17 11:37:35
 * @version 1.1
 *
 * function:
	when finger touches moved out of element borders then cancel touchend event.
 * useage:
 * $('#button').touch('end', function(e){});
 * $(document).touch('end', '#button', function(e){});
 */
!function(a){a.fn.touch=function(){var c,d,e,f,b={ua:navigator.userAgent,platform:navigator.platform,isChrome:"object"==typeof window.chrome};return b.isMobileChrome=b.isChrome&&b.ua.indexOf("Android")>-1,b.isChromeEmulation=b.isChrome&&b.ua.indexOf("Chrome")<0&&b.platform.indexOf("Linux")<0,b.isSupportTouch=function(){var a=document.createElement("div");return a.addEventListener("touchstart",function(){}),"object"==typeof a.ontouchstart||b.isChromeEmulation}(),c=arguments,c.length>1&&(d=c[0]?c[0]:"",d="click"==d||"end"==d?b.isSupportTouch?"touchend":"click":"touch"+d,e=c.length>2?c[2]:c[1],f=c.length>2?c[1]:"",a(this).on(d,f,function(a){if("function"==typeof e){var b=a.changedTouches?a.changedTouches[0]:a;("touchend"!=d||"touchend"==d&&document.elementFromPoint(b.pageX,b.pageY)==this)&&e.apply(this,[a])}})),this}}($);
